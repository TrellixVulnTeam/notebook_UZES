
<h2>汇编分类</h2>

- 8086 汇编(16bit)
- x86 汇编(32bit)
- x64 汇编(64bit)
- ARM 汇编(嵌入式，移动设备)

x64 汇编根据编译器不同，有两种书写格式:

- intel
- AT&T

-----------

汇编语言不区分大小写

-----------

两大知识点:

- 汇编指令
- 寄存器

-----------

```c++
int a = 10;
int b = a + 1;


/*
     7:     int a = 10;
005B1825  mov         dword ptr [a],0Ah  
     8:     int b = a + 1;
005B182C  mov         eax,dword ptr [a]  
005B182F  add         eax,1  
005B1832  mov         dword ptr [b],eax
*/
```

-----------

<h2>x64 寄存器</h2>


- 通用寄存器: RAX, RBX, RCX, RDX

寄存器的大小和指针一致，8个字节


- 32bit通用寄存器: EAX, EBX, ECX, EDX
- 16bit通用寄存器: AX, BX, CX, DX

RAX 兼容 EAX, 低4个字节为 EAX
EAX 兼容 AX, 低2个字节为 AX
AX 高字节为 AH, 低字节为 AL

一般的规律

- R开头的寄存器是64bit的, 占8个字节
- E开头的寄存器是32bit的, 占4个字节

-----------

<h2>内联汇编</h2>

可以在 c++ 中嵌入汇编代码

```c++
__asm {
    mov ax, 10
    mov eax, 11223344H
}
```

通过 vs 调试发现 ax 的值被改为了 3344H

-------------------
<h2>部分汇编指令</h2>

- `[地址值]`: 中括号里放的都是地址值
- mov: `mov dest,src` 将src的内容赋值给 dest

```
从内存地址 1128h 开始取出 2个字节存储3
mov word ptr [1128h], 3

从内存地址 1128h 开始取出 4个字节（往高地址）的内容给eax
ptr 固定写法
mov eax, dword ptr[1128h]
```

word 是2个字节, dword(double world) 4个字节，qword(quad world) 8个字节

- call: call 函数地址
- lea: `lea dest,[地址值]`, 将dest的值赋值为地址, load effect address
- ret: 函数返回, eax 寄存器常用来保存函数的返回值
- xor: xor op1, op2 将op1 和 op2异或的结果赋值给op1, 类似于 op1 = op1 ^ op2
- add: add op1, op2  <==> op1 = op1 + op2
- sub: sub op1, op2  <==> op1 = op1 - op2
- inc: inc op  <==> op = op + 1
- dec: dec op  <==> op = op - 1
- jmp: jmp 内存地址, 跳到该地址去执行
- j***: j 开头的一般都是跳转，大多数都是带条件的跳转, 一般和test, cmp 等配合使用

<img src="0.png">

-------------
